<%- include('./partials/headers'); %>
<% users.forEach(user=>{%>
  <div>
    <h1>Logged Users</h1>
    <li style="list-style: none; display: flex; align-items: center; gap: 50px;margin-left: 20px;"> 
      <div style="display: flex; gap: 10px;align-items: center;"><img src="./uploads/user/<%=user.photo%>" alt="<% user.name %>" height="30" width="30" style="border-radius: 50%;"><%= user.name %>
      </div> <%= user.email %>
      <button style="color: red;" onclick="handleDeleteUser('<%= user._id %>')">Delete</button>
    </li>
  </div>

  <% }) %>
    <form action="http://localhost:5000/users/add" method="post" enctype="multipart/form-data" >
      <h1>Add New User</h1>
      <label for="name">Name</label>
      <input type="text" id="name" name="name" />
      <br />
      <label for="email">Email</label>
      <input type="email" id="email" name="email" />
      <br />
      <label for="mobile">Mobile</label>
      <input type="text" id="mobile" name="mobile" />
      <br />
      <label for="password">Password</label>
      <input type="password" id="password" name="password" />
      <br />
      <label for="photo">Photo</label>
      <input type="file" id="photo" name="photo" />
      <br />
      <button>Submit</button>
    </form>
    <script>
      const handleDeleteUser=(id)=>{
        // fetch(`${process.env.NODE_ENV}`)
        fetch(`/users/${id}`,{
          method:"delete"
        }).then(res=>res.json()).then(data=>console.log(data))
      }
    </script>
    <%- include('./partials/footer'); %>
